"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[132],{7942:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var t=o(5893),s=o(1151);const i={},a="Component development",r={id:"Component development/Introduction",title:"Introduction",description:"Here explain how to write good components, easy for maintenance.",source:"@site/../docs/Component development/Introduction.md",sourceDirName:"Component development",slug:"/Component development/Introduction",permalink:"/react-elegant-ui/Component development/Introduction",draft:!1,unlisted:!1,editUrl:"https://github.com/vitonsky/react-elegant-ui/tree/master/docs/../docs/Component development/Introduction.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Design system style guide",permalink:"/react-elegant-ui/Component development/DesignSystem"},next:{title:"Developer notes",permalink:"/react-elegant-ui/Component development/Notes"}},l={},c=[{value:"Use strict typing",id:"use-strict-typing",level:2},{value:"Write stupid code",id:"write-stupid-code",level:2},{value:"Comment all",id:"comment-all",level:2},{value:"Specify licenses and authors for thirdparty resources",id:"specify-licenses-and-authors-for-thirdparty-resources",level:2},{value:"Blocks",id:"blocks",level:2},{value:"Minimal implementation",id:"minimal-implementation",level:3},{value:"Elements",id:"elements",level:2},{value:"Modifiers",id:"modifiers",level:2},{value:"Keep state outside",id:"keep-state-outside",level:2},{value:"Split to features",id:"split-to-features",level:2},{value:"Use wrappers",id:"use-wrappers",level:2},{value:"Move common logic outside",id:"move-common-logic-outside",level:2},{value:"Use common interfaces",id:"use-common-interfaces",level:2},{value:"Make extenson nodes",id:"make-extenson-nodes",level:2},{value:"Forward all",id:"forward-all",level:2},{value:"Class component vs functional",id:"class-component-vs-functional",level:2},{value:"Component incapsulation and autonomy",id:"component-incapsulation-and-autonomy",level:2},{value:"Use contexts to props forwarding",id:"use-contexts-to-props-forwarding",level:2},{value:"Use DI",id:"use-di",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"component-development",children:"Component development"}),"\n",(0,t.jsx)(n.p,{children:"Here explain how to write good components, easy for maintenance."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h1,{id:"common-recomendation",children:"Common recomendation"}),"\n",(0,t.jsx)(n.h2,{id:"use-strict-typing",children:"Use strict typing"}),"\n",(0,t.jsx)(n.p,{children:"Components written on typescript because strict types simplify maintenance."}),"\n",(0,t.jsx)(n.p,{children:"When you wrong - you just can't compile code and in many cases you even don't need to check types in runtime, because successful compilation guarantee you many things."}),"\n",(0,t.jsx)(n.p,{children:"But guarantees require high quality code with types which reflect domain specific."}),"\n",(0,t.jsxs)(n.p,{children:["Therefore you must write real types and try avoid ",(0,t.jsx)(n.code,{children:"any"})," type, type casting and other hacks."]}),"\n",(0,t.jsxs)(n.p,{children:["Typescript is very flexible language and allow you make complexity types. Usually TS features enought for any case. If you can't express something, check ",(0,t.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/",children:"typescript docs"})," or make issue to discuss your problem."]}),"\n",(0,t.jsx)(n.h2,{id:"write-stupid-code",children:"Write stupid code"}),"\n",(0,t.jsx)(n.p,{children:"Maintain complexity is very important parameter of code, it's literally define future of code base."}),"\n",(0,t.jsx)(n.p,{children:"Code complexity and its diversity is a key factors of code base hard for maintenance."}),"\n",(0,t.jsx)(n.p,{children:"The simply stupid code the better. Under stupid mean its clear and simplicity."}),"\n",(0,t.jsx)(n.p,{children:"We can use linters and tools which control codestyle, but we can't prevent all cases with complexity code, especially since sometime we have to write complexity code for performance purposes."}),"\n",(0,t.jsx)(n.p,{children:"Please, don't write beautiful and smart code which require time to understand."}),"\n",(0,t.jsx)(n.p,{children:"Your code must be simple, obviously and monosemantic. What would people read it and don't think what means your construction."}),"\n",(0,t.jsxs)(n.p,{children:["For example, ",(0,t.jsx)(n.code,{children:"x === -1"})," better than ",(0,t.jsx)(n.code,{children:"!~x"}),", because we shouldn't parse syntax and build logical pipeline with negation of negation, follow the logic and other things. We just see statement and understand it instantly."]}),"\n",(0,t.jsx)(n.p,{children:"Your code is nothing and will replace in any time. At least because tomorrow it will be deprecated. Keep it in mind when write code and focus on functionality and clearly. Functional will keep forever."}),"\n",(0,t.jsx)(n.h2,{id:"comment-all",children:"Comment all"}),"\n",(0,t.jsx)(n.p,{children:"If you have to write not trivial code or use hack, explain it."}),"\n",(0,t.jsx)(n.p,{children:"When you make public essence such as function, class or other object, add doc block for it."}),"\n",(0,t.jsx)(n.p,{children:"When you change a exists public essence and it change behavior or signature, update description of it."}),"\n",(0,t.jsx)(n.p,{children:"If you not wanna do something right now, but see that it needful or would be usefull, make TODO comment with explain of it."}),"\n",(0,t.jsx)(n.p,{children:"If you don't sure about something, comment it and say about. It's fine, someone later improve it, maybe you or not."}),"\n",(0,t.jsx)(n.p,{children:"If you see suboptimal things, make TODO comment with tag #perf and explain problems. Criticism to code it's fine and help to make code better. But please, explain points, but not just insult a code because it useless information."}),"\n",(0,t.jsx)(n.h2,{id:"specify-licenses-and-authors-for-thirdparty-resources",children:"Specify licenses and authors for thirdparty resources"}),"\n",(0,t.jsx)(n.p,{children:"We respect authors of thirdparty resources and require specify license and authors for any thirdparty resources. Not matter what is it. It may be icons, fonts, images, libraries, parts of code or other. You must add this information for any resource and resource license must allow use resource anywhere."}),"\n",(0,t.jsx)(n.p,{children:"Remember that you are responsible for check licenses and author rights. If you find resource on some random site and there say that this resource is free to use anywhere it's mean nothing. You must reference to source of each resource and this must contains license agreement."}),"\n",(0,t.jsx)(n.p,{children:"This is to ensure fair usage."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h1,{id:"components-development-principles",children:"Components development principles"}),"\n",(0,t.jsxs)(n.p,{children:["For info about development components see ",(0,t.jsx)(n.a,{href:"/react-elegant-ui/Component%20development/ComponentNaming",children:"component naming and structure"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["More info about components in ",(0,t.jsx)(n.a,{href:"/react-elegant-ui/Introduction/ComponentArchitecture",children:"component anatomy"})," and ",(0,t.jsx)(n.a,{href:"/react-elegant-ui/Introduction/ComponentFileStructure",children:"component file structure"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["If you still don't, must read ",(0,t.jsx)(n.a,{href:"https://en.bem.info/methodology/",children:"BEM methodology"})," to understand terms and architecture of components."]}),"\n",(0,t.jsx)(n.h2,{id:"blocks",children:"Blocks"}),"\n",(0,t.jsxs)(n.p,{children:["For control a class names of components use library ",(0,t.jsx)(n.a,{href:"https://github.com/bem/bem-react/tree/master/packages/classname",children:"@bem-react/classname"}),", make cn object in basic implementation of component and use it in other essences."]}),"\n",(0,t.jsx)(n.h3,{id:"minimal-implementation",children:"Minimal implementation"}),"\n",(0,t.jsx)(n.p,{children:"Block it's root of component and should implement minimal common features of component."}),"\n",(0,t.jsxs)(n.p,{children:["If you want implement feature which will use only on desktop, such as keyboard navigation, do it in feature file with feature name postfix in name, for example ",(0,t.jsx)(n.code,{children:"Button@desktop.tsx"}),", ",(0,t.jsx)(n.code,{children:"Button@touch.tsx"}),", ",(0,t.jsx)(n.code,{children:"Button@someExperementName.tsx"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"elements",children:"Elements"}),"\n",(0,t.jsx)(n.p,{children:"Move all elements to separate components, even if it very simply block."}),"\n",(0,t.jsx)(n.p,{children:"It need to user can replace element to other implementation."}),"\n",(0,t.jsx)(n.h2,{id:"modifiers",children:"Modifiers"}),"\n",(0,t.jsx)(n.p,{children:"Modifiers should be a High Order Components (HOC)."}),"\n",(0,t.jsx)(n.p,{children:"Modifiers should self remove all own props which not declared in basic block interface and don't forward it."}),"\n",(0,t.jsx)(n.p,{children:"You can use compose library to define HOCs which will apply by match props values and auto remove own properties when not match."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h1,{id:"reuse",children:"Reuse"}),"\n",(0,t.jsx)(n.h2,{id:"keep-state-outside",children:"Keep state outside"}),"\n",(0,t.jsx)(n.p,{children:"Keep state outside and make requests to change state inside."}),"\n",(0,t.jsx)(n.p,{children:"If don't do it, component will keep private state and wrappers can't control component and component stay unextendable."}),"\n",(0,t.jsx)(n.p,{children:"You can keep inside a state which specific only for this entity, but all public properties states must keep outside."}),"\n",(0,t.jsx)(n.h2,{id:"split-to-features",children:"Split to features"}),"\n",(0,t.jsx)(n.p,{children:"Component can't have features for any case, because number of cases is infinity."}),"\n",(0,t.jsx)(n.p,{children:"Instead this component should be designed extensible and implement only basic features."}),"\n",(0,t.jsx)(n.p,{children:"All other may be implement as wrappers which add features."}),"\n",(0,t.jsx)(n.p,{children:"This design allows add features for any case."}),"\n",(0,t.jsx)(n.p,{children:"Default implementation of some feature in library don't like for you? It's fine, you don't need to fork library, replace some details in this implementation and support it self, just replace feature to your own implementation and it all. You can copy code of default implementation, replace details and use as your own feature which work as you wish."}),"\n",(0,t.jsx)(n.p,{children:"If basic block layout bad for your case, just use your own implementation, you need only replace it with compose."}),"\n",(0,t.jsx)(n.h2,{id:"use-wrappers",children:"Use wrappers"}),"\n",(0,t.jsx)(n.p,{children:"When you implement block feature, you need block to wrap it. But you must not direct use block inside implementation. It make feature not applyable for other block implementation."}),"\n",(0,t.jsx)(n.p,{children:"Instead this make HOC for block, export it, apply to block and export wrapped block."}),"\n",(0,t.jsx)(n.p,{children:"This way allow to user apply this feature to any block which implement interface of basic block."}),"\n",(0,t.jsx)(n.h2,{id:"move-common-logic-outside",children:"Move common logic outside"}),"\n",(0,t.jsx)(n.p,{children:"Some UI logic need in many components. When you catch this, just move this logic to library, unify it and use library in same cases."}),"\n",(0,t.jsx)(n.p,{children:"Better if you make library which not bind to framework and then adopt it to this, for example make behavior hook. This way allow you collect behavior logic and use it indepedent of framework features and even indepedent of framework, for example in pure JS."}),"\n",(0,t.jsxs)(n.p,{children:["Good example of this it is ",(0,t.jsx)(n.a,{href:"https://popper.js.org",children:"popperjs"})," which can be use in pure js, react or any other library."]}),"\n",(0,t.jsx)(n.h2,{id:"use-common-interfaces",children:"Use common interfaces"}),"\n",(0,t.jsxs)(n.p,{children:["When interface have typical properties, use extends the coommon interfaces like ",(0,t.jsx)(n.code,{children:"IComponentElement"})]}),"\n",(0,t.jsx)(n.p,{children:"This unify properties and simplify global refactoring, because you can refactor only one interface and changes will apply to all implementations"}),"\n",(0,t.jsx)(n.h2,{id:"make-extenson-nodes",children:"Make extenson nodes"}),"\n",(0,t.jsx)(n.p,{children:"When you build component think about how users may want extend this."}),"\n",(0,t.jsx)(n.p,{children:"To extend component often need add child nodes, then add props which give component and render in some place inside."}),"\n",(0,t.jsxs)(n.p,{children:["You can use names start from ",(0,t.jsx)(n.code,{children:"addon"}),": ",(0,t.jsx)(n.code,{children:"addonBefore"}),", ",(0,t.jsx)(n.code,{children:"addonAfter"}),", ",(0,t.jsx)(n.code,{children:"addonBeforeControl"}),", ",(0,t.jsx)(n.code,{children:"addonAfrerWrapper"})]}),"\n",(0,t.jsx)(n.h2,{id:"forward-all",children:"Forward all"}),"\n",(0,t.jsx)(n.p,{children:"When you make wrapper, probably you insert to basic element some props."}),"\n",(0,t.jsx)(n.p,{children:"Don't forget forward user props with same names. You should make mix from your value and user value."}),"\n",(0,t.jsx)(n.p,{children:"If it class name join it, if it callback, make call chain from your and user callback, if it context, mix context values but don't lose user values."}),"\n",(0,t.jsx)(n.h2,{id:"class-component-vs-functional",children:"Class component vs functional"}),"\n",(0,t.jsx)(n.p,{children:"You can make components of any type, class components, functional components or both."}),"\n",(0,t.jsx)(n.p,{children:"But functional components have hooks and very convenient move common ligic to hooks and use it everywhere."}),"\n",(0,t.jsx)(n.p,{children:"Also, functional components is simply, so this library use mostly functional components."}),"\n",(0,t.jsx)(n.p,{children:"But you can mix this."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h1,{id:"abstract-components-and-replaceable",children:"Abstract components and replaceable"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/react-elegant-ui/Introduction/Tokens",children:"Use design tokens"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"component-incapsulation-and-autonomy",children:"Component incapsulation and autonomy"}),"\n",(0,t.jsx)(n.p,{children:"Component it's standalone entity and must be indepedent from all other."}),"\n",(0,t.jsx)(n.p,{children:"It mean that component must contain all self parts such as code, styles, design tokens, docs, and other resources."}),"\n",(0,t.jsx)(n.p,{children:"Component must consist from parts which can be replace to other implementations and end features can be define only while make bundle."}),"\n",(0,t.jsx)(n.h2,{id:"use-contexts-to-props-forwarding",children:"Use contexts to props forwarding"}),"\n",(0,t.jsx)(n.p,{children:"Components may use many wrappers and to forward props to some element you should use contexts."}),"\n",(0,t.jsx)(n.p,{children:"Just make context contains props while make element and use it inside. And when you need to set props on element, use context provider for it."}),"\n",(0,t.jsx)(n.h2,{id:"use-di",children:"Use DI"}),"\n",(0,t.jsx)(n.p,{children:"When you need some object, like element, you shall not use it directly never."}),"\n",(0,t.jsx)(n.p,{children:"Instead this use dependency injection containers."}),"\n",(0,t.jsx)(n.p,{children:"It allows you replace objects while composing."}),"\n",(0,t.jsx)(n.p,{children:"Don't make types for DI which have all possible objects. Instead make type for basic components and standalone types for each feature and union this types while make bundle."}),"\n",(0,t.jsx)(n.p,{children:"This way allows to users set only necessary objects in their registry."}),"\n",(0,t.jsxs)(n.p,{children:["See more info in ",(0,t.jsx)(n.a,{href:"https://github.com/bem/bem-react/tree/master/packages/di",children:"DI library docs"})]})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,o)=>{o.d(n,{Z:()=>r,a:()=>a});var t=o(7294);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);